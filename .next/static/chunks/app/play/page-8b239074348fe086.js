(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{1051:(e,t,r)=>{"use strict";r.d(t,{F:()=>c,PlayerProvider:()=>i});var a=r(5155),s=r(2115);let n=(0,s.createContext)(void 0),l="atlasPlay_playerName";function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[c,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=localStorage.getItem(l);e&&(i(e),o(!0))},[]),(0,a.jsx)(n.Provider,{value:{playerName:r,setPlayerName:e=>{let t=e?e.trim():null;i(t),t?localStorage.setItem(l,t):localStorage.removeItem(l)},hasSetName:c,setHasSetName:o},children:t})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("usePlayer must be used within a PlayerProvider");return e}},3499:(e,t,r)=>{Promise.resolve().then(r.bind(r,7560))},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var a=r(2115);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function u(e){o=i(o,e),c.forEach(e=>{e(o)})}function d(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},7560:(e,t,r)=>{"use strict";r.d(t,{default:()=>eO});var a=r(5155),s=r(2115),n=r(1051),l=r(4477);let i=(0,l.createServerReference)("60ce4d61e22cec8b1020248b3f8030a09f94a89c2d",l.callServer,void 0,l.findSourceMapURL,"getLocalLocationSuggestion"),c=(0,l.createServerReference)("605107a376d52442d0a3c40c4ffe4da2a10403b66a",l.callServer,void 0,l.findSourceMapURL,"isValidLocalLocation"),o=(0,l.createServerReference)("6006bf44b2226a2944b93288b62b6b07bbc2f3fe0e",l.callServer,void 0,l.findSourceMapURL,"getLocalLocationHints");var u=r(9708),d=r(2085),m=r(9434);let p=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:l=!1,...i}=e,c=l?u.DX:"button";return(0,a.jsx)(c,{className:(0,m.cn)(p({variant:s,size:n,className:r})),ref:t,...i})});x.displayName="Button";let f=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,m.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","text-base md:text-sm",r),ref:t,...n})});f.displayName="Input";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});h.displayName="Card";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("flex flex-col space-y-1.5 p-6",r),...s})});g.displayName="CardHeader";let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});v.displayName="CardTitle";let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",r),...s})});w.displayName="CardDescription";let y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("p-6 pt-0",r),...s})});y.displayName="CardContent";let b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("flex items-center p-6 pt-0",r),...s})});b.displayName="CardFooter";var N=r(4439);let j=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(N.bL,{ref:t,className:(0,m.cn)("relative overflow-hidden",r),...n,children:[(0,a.jsx)(N.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,a.jsx)(S,{}),(0,a.jsx)(N.OK,{})]})});j.displayName=N.bL.displayName;let S=s.forwardRef((e,t)=>{let{className:r,orientation:s="vertical",...n}=e;return(0,a.jsx)(N.VM,{ref:t,orientation:s,className:(0,m.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...n,children:(0,a.jsx)(N.lr,{className:"relative flex-1 rounded-full bg-border"})})});S.displayName=N.VM.displayName;let k=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function T(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,m.cn)(k({variant:r}),t),...s})}let A=(0,d.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),C=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,m.cn)(A({variant:s}),r),...n})});C.displayName="Alert";let E=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,m.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});E.displayName="AlertTitle";let I=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("text-sm [&_p]:leading-relaxed",r),...s})});I.displayName="AlertDescription";var P=r(5863);let O=s.forwardRef((e,t)=>{let{className:r,value:s,...n}=e;return(0,a.jsx)(P.bL,{ref:t,className:(0,m.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,a.jsx)(P.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});O.displayName=P.bL.displayName;var R=r(8611);let L=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(R.bL,{className:(0,m.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,a.jsx)(R.zi,{className:(0,m.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});L.displayName=R.bL.displayName;var D=r(968);let M=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(D.b,{ref:t,className:(0,m.cn)(M(),r),...s})});_.displayName=D.b.displayName;var F=r(7679);let G=e=>{let{className:t}=e;return(0,a.jsxs)("div",{className:"flex items-center text-primary ".concat(t),"data-ai-hint":"globe kids",children:[(0,a.jsx)(F.A,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12"}),(0,a.jsx)("span",{className:"ml-2 sm:ml-3 text-2xl sm:text-3xl md:text-4xl font-headline font-semibold",children:"AtlasPlay"})]})};var q=r(5268),z=r(9829),Y=r(8111);let U={score:{icon:(0,a.jsx)(q.A,{className:"h-16 w-16 text-yellow-400"}),title:"New High Score!",message:e=>"You reached a new high score of ".concat(e," points! \uD83C\uDF89")},streak:{icon:(0,a.jsx)(z.A,{className:"h-16 w-16 text-orange-400"}),title:"Longest Streak!",message:e=>"Incredible! New longest streak of ".concat(e," moves! \uD83D\uDD25")},iq:{icon:(0,a.jsx)(Y.A,{className:"h-16 w-16 text-purple-400"}),title:"Peak IQ Achieved!",message:e=>"Genius! You've reached a new peak IQ of ".concat(e,"! \uD83E\uDDE0")}};function V(e){let{isOpen:t,onClose:r,recordType:n,newValue:l}=e;if((0,s.useEffect)(()=>{if(t){let e=setTimeout(()=>{r()},4e3);return()=>clearTimeout(e)}},[t,r]),!t)return null;let i=U[n];return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in-50",children:(0,a.jsxs)(h,{className:"w-full max-w-sm shadow-2xl transform scale-100 animate-in zoom-in-90 duration-300",children:[(0,a.jsxs)(g,{className:"text-center items-center pt-8",children:[i.icon,(0,a.jsx)(v,{className:"font-headline text-3xl mt-4",children:i.title})]}),(0,a.jsxs)(y,{className:"text-center pb-8",children:[(0,a.jsx)("p",{className:"text-lg mb-8 mt-2",children:i.message(l)}),(0,a.jsx)(x,{onClick:r,size:"lg",className:"w-1/2",children:"Awesome!"})]})]})})}function B(e){let{isOpen:t,onClose:r,wins:n}=e;return((0,s.useEffect)(()=>{if(t){let e=setTimeout(()=>{r()},4e3);return()=>clearTimeout(e)}},[t,r]),t)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in-50",children:(0,a.jsxs)(h,{className:"w-full max-w-md shadow-2xl transform scale-100 animate-in zoom-in-90 duration-300",children:[(0,a.jsxs)(g,{className:"text-center items-center pt-8",children:[(0,a.jsx)(q.A,{className:"h-20 w-20 text-yellow-400 animate-bounce"}),(0,a.jsx)(v,{className:"font-headline text-3xl mt-4",children:"Amazing Milestone!"})]}),(0,a.jsxs)(y,{className:"text-center pb-8",children:[(0,a.jsxs)("p",{className:"text-lg mb-6 mt-2",children:["\uD83C\uDF89 Congratulations! You've reached ",(0,a.jsxs)("strong",{className:"text-primary",children:[n," wins"]}),"! Keep going to beat your high score!"]}),(0,a.jsx)(x,{onClick:r,size:"lg",className:"w-1/2",children:"Awesome!"})]})]})}):null}var H=r(6936),Q=r(8027);let W="atlasplay-theme";function J(e){let{className:t}=e,[r,n]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=localStorage.getItem(W);e?n(e):n(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,s.useEffect)(()=>{"dark"===r?(document.documentElement.classList.add("dark"),localStorage.setItem(W,"dark")):"light"===r&&(document.documentElement.classList.remove("dark"),localStorage.setItem(W,"light"))},[r]),null===r)?(0,a.jsx)(x,{variant:"ghost",size:"icon",className:t,disabled:!0,children:(0,a.jsx)(H.A,{className:"h-5 w-5"})}):(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>{n(e=>"light"===e?"dark":"light")},"aria-label":"Switch to ".concat("light"===r?"dark":"light"," mode"),className:t,children:"light"===r?(0,a.jsx)(Q.A,{className:"h-5 w-5"}):(0,a.jsx)(H.A,{className:"h-5 w-5"})})}var X=r(8639),K=r(2087),$=r(7159),Z=r(3764),ee=r(3300),et=r(172),er=r(1721),ea=r(3503),es=r(4965),en=r(3498),el=r(8294),ei=r(620),ec=r(8921),eo=r(1467),eu=r(4601),ed=r(5554),em=r(1133),ep=r(6273),ex=r(8061),ef=r(7569),eh=r(6472),eg=r(7648),ev=r(594),ew=r(7390),ey=r(3349),eb=r(8531),eN=r(7481);let ej=["A","T","L","A","S"],eS=e=>e>=81?"Globetrotter":e>=61?"Geo Genius":e>=41?"Navigator":e>=21?"Explorer":"Newbie",ek="atlasPlayBestScore_",eT="atlasPlayBestStreak_",eA="atlasPlayBestIQ_",eC="atlasPlayTotalWins_",eE="atlasPlaySoundEffects",eI="atlasPlayBackgroundMusic";class eP extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Unhandled error in AtlasGame:",e,t)}render(){if(this.state.hasError){var e;return(0,a.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-red-700",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-red-600",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred."})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null}}}function eO(){return(0,a.jsx)(eP,{children:(0,a.jsx)(eR,{})})}function eR(){let{playerName:e,setPlayerName:t,hasSetName:r,setHasSetName:l}=(0,n.F)(),{toast:u}=(0,eN.dj)(),[d,m]=(0,s.useState)(""),[p,N]=(0,s.useState)(r?"countdown":"nameInput"),[S,k]=(0,s.useState)(0),[A,P]=(0,s.useState)([]),[R,D]=(0,s.useState)(new Set),[M,F]=(0,s.useState)(""),[Y,U]=(0,s.useState)(!1),[H,Q]=(0,s.useState)(!1),[W,eP]=(0,s.useState)(!1),[eO,eR]=(0,s.useState)(null),[eL,eD]=(0,s.useState)([]),[eM,e_]=(0,s.useState)("user"),[eF,eG]=(0,s.useState)(""),[eq,ez]=(0,s.useState)({score:0,coins:0,iq:0}),[eY,eU]=(0,s.useState)(1),[eV,eB]=(0,s.useState)(null),[eH,eQ]=(0,s.useState)(0),[eW,eJ]=(0,s.useState)(0),[eX,eK]=(0,s.useState)(0),[e$,eZ]=(0,s.useState)(0),[e0,e1]=(0,s.useState)(0),[e5,e4]=(0,s.useState)(!1),[e2,e3]=(0,s.useState)(null),[e6,e8]=(0,s.useState)(!1),[e9,e7]=(0,s.useState)(!1),[te,tt]=(0,s.useState)(5),[tr,ta]=(0,s.useState)(15),ts=(0,s.useRef)(null),[tn,tl]=(0,s.useState)(!0),[ti,tc]=(0,s.useState)(!0),to=(0,s.useRef)(null),tu=(0,s.useRef)(null),[td,tm]=(0,s.useState)(!1),[tp,tx]=(0,s.useState)(!0),[tf,th]=(0,s.useState)(!0),[tg,tv]=(0,s.useState)(!1),[tw,ty]=(0,s.useState)(!1),tb=(0,s.useRef)(p);(0,s.useEffect)(()=>{tb.current=p},[p]);let tN=(0,s.useRef)(tf);(0,s.useEffect)(()=>{tN.current=tf},[tf]);let tj=(0,s.useRef)(tg);(0,s.useEffect)(()=>{tj.current=tg},[tg]);let tS=(0,s.useCallback)(e=>{if(tn)try{new Audio(e.startsWith("/")?e:"/sounds/".concat(e)).play().catch(t=>console.error("Error playing sound effect ".concat(e,":"),t))}catch(t){console.error("Could not create audio element for sound effect ".concat(e,":"),t)}},[tn]);(0,s.useEffect)(()=>{to.current||(to.current=new Audio("/sounds/background-music.mp3"),to.current.loop=!0,to.current.volume=.2)},[]),(0,s.useEffect)(()=>{to.current&&(!ti||"playerTurn"!==p&&"opponentTurn"!==p&&"loadingNextTurn"!==p||tg||eV||e5||e6?to.current.pause():to.current.play().catch(e=>console.error("Error playing background music:",e)))},[ti,p,tg,eV,e5,e6]);let tk=(0,s.useCallback)(t=>e?"".concat(t).concat(e.trim().replace(/\s+/g,"_").toLowerCase()):null,[e]),tT=(0,s.useCallback)(e=>e.trim().toLowerCase(),[]),tA=(0,s.useCallback)(e=>e.charAt(e.length-1).toUpperCase(),[]),tC=(0,s.useCallback)(()=>{ts.current&&(clearInterval(ts.current),ts.current=null)},[]),tE=(0,s.useCallback)((t,r)=>{if(e5||e6||!e)return!1;let a=tk(ek),s=tk(eT),n=tk(eA),l=!1;return a&&t.score>0&&t.score>eW?(eJ(t.score),localStorage.setItem(a,t.score.toString()),e3({type:"score",value:t.score}),e4(!0),tS("record-celebration.wav"),l=!0):s&&r>0&&r>eX?(eK(r),localStorage.setItem(s,r.toString()),e3({type:"streak",value:r}),e4(!0),tS("record-celebration.wav"),l=!0):n&&t.iq>0&&t.iq>e$&&(eZ(t.iq),localStorage.setItem(n,t.iq.toString()),e3({type:"iq",value:t.iq}),e4(!0),tS("record-celebration.wav"),l=!0),l},[eW,eX,e$,e5,e6,e,tk,tS]),tI=(0,s.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(tC(),"gameOver"===tb.current)return;tv(!1),N("gameOver"),eB(t),setTimeout(()=>{u({title:"Game Over",description:t,variant:r?"default":"destructive"})},0),r?tS("game-over-win.wav"):tS("game-over-lose.wav"),eQ(0);let a=tE(eq,eH);if(r&&e){let e=tk(eC),t=tk("atlasPlay25WinsCelebrated_");if(e&&t){let r=parseInt(localStorage.getItem(e)||"0",10)+1;e1(r),localStorage.setItem(e,r.toString());let s="true"===localStorage.getItem(t);!(r>=25)||s||a||e6||(e8(!0),tS("wins-milestone.wav"),localStorage.setItem(t,"true"))}}},[eq,eH,tE,u,e6,tC,e,tk,tS]),tP=(0,s.useRef)(tI);(0,s.useEffect)(()=>{tP.current=tI},[tI]);let tO=(0,s.useCallback)(()=>{if(tj.current||!tN.current||"playerTurn"!==tb.current||eV||e5||e6)return;tC(),ta(15);let e=setInterval(()=>{if(tj.current||"playerTurn"!==tb.current||!tN.current||eV||e5||e6){clearInterval(e),ts.current=null;return}ta(t=>t<=1?(clearInterval(e),ts.current=null,"playerTurn"!==tb.current||!tN.current||eV||e5||e6||tj.current||(e7(!0),tS("time-up.wav"),tP.current("Time's up!")),0):(t<=6&&t>1&&tS("timer-tick.wav"),t-1))},1e3);ts.current=e},[tC,eV,e5,e6,tS]);(0,s.useEffect)(()=>{"playerTurn"!==p||!tN.current||eV||e5||e6||tg?tC():ts.current||tO()},[p,tf,eV,e5,e6,tg,tO,tC]),(0,s.useEffect)(()=>{let e=()=>{let e=navigator.onLine;th(e),e?setTimeout(()=>u({title:"Back Online",description:"Gameplay can resume.",icon:(0,a.jsx)(X.A,{className:"h-5 w-5 text-green-500"})}),0):setTimeout(()=>u({title:"You are Offline",description:"Some features may be limited. Please check your connection.",variant:"destructive",icon:(0,a.jsx)(K.A,{className:"h-5 w-5"})}),0)};return"undefined"==typeof navigator||(th(navigator.onLine),window.addEventListener("online",e),window.addEventListener("offline",e),navigator.share||ty(!0)),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e),tC()}},[u,tC]),(0,s.useEffect)(()=>{r?e&&"nameInput"===p&&N("countdown"):N("nameInput")},[r,e,p]),(0,s.useEffect)(()=>{if(!e)return;let t=tk(ek),r=tk(eT),a=tk(eA),s=tk(eC);t&&eJ(parseInt(localStorage.getItem(t)||"0",10)),r&&eK(parseInt(localStorage.getItem(r)||"0",10)),a&&eZ(parseInt(localStorage.getItem(a)||"0",10)),s&&e1(parseInt(localStorage.getItem(s)||"0",10));let n=localStorage.getItem(eE);tl(!n||JSON.parse(n));let l=localStorage.getItem(eI);tc(!l||JSON.parse(l))},[e,tk]);let tR=(0,s.useCallback)(()=>{P([]),D(new Set),F(""),ez({score:0,coins:0,iq:0}),eQ(0),eU(1),tt(5),eR(null),eB(null),e4(!1),e8(!1),e7(!1),tv(!1),ta(15)},[]);(0,s.useEffect)(()=>{if("countdown"===p&&e){if(S<ej.length){let e=setTimeout(()=>{tS("countdown-tick.wav"),k(e=>e+1)},700);return()=>clearTimeout(e)}tR(),N("playerTurn"),e_("user"),eG("S"),tS("game-start.wav"),setTimeout(()=>u({title:"Game Start!",description:"Enter a place starting with 'S'"}),0)}},[p,S,e,u,tR,tS]);let tL=(0,s.useCallback)(async(e,t)=>{if(e5||e6||tj.current){setTimeout(()=>tL(e,t),200);return}N("opponentTurn"),U(!0);try{if(await new Promise(e=>setTimeout(e,1e3+1e3*Math.random())),tj.current){U(!1);return}let r=await i(t,e);if(!r){tP.current("Opponent couldn't find a valid location. You win!",!0),U(!1);return}let a=tT(r);if(a.charAt(0).toUpperCase()!==t){tP.current("Opponent made an invalid move (wrong letter: ".concat(r,"). You win!"),!0),U(!1);return}if(R.has(a)){tP.current("Opponent repeated a location ('".concat(r,"'). You win!"),!0),U(!1);return}let s=await c(r,e);if(!s.isValid){tP.current(s.reason||"Opponent suggested an invalid location ('".concat(r,"'). You win!"),!0),U(!1);return}P(e=>[...e,r]),D(e=>new Set(e).add(a)),tS("opponent-move.wav"),setTimeout(()=>{u({title:"Opponent Played!",description:"Opponent chose '".concat(r,"'. Your turn!")})},0),N("playerTurn"),e_("user"),eG(tA(r))}catch(e){console.error("Local opponent turn error:",e),setTimeout(()=>u({title:"Game Error",description:"An error occurred during the opponent's turn.",variant:"destructive",icon:(0,a.jsx)($.A,{className:"h-5 w-5"})}),0),N("playerTurn"),e_("user")}finally{U(!1)}},[tT,tA,u,R,e5,e6,tS]),tD=(0,s.useCallback)(async()=>{if(!M.trim()||"playerTurn"!==tb.current||Y||e5||e6||tj.current)return;tC(),U(!0),eR(null),tS("click.wav");let e=M.trim(),t=tT(e);if(t.charAt(0).toUpperCase()!==eF){eR("Location must start with the letter '".concat(eF,"'.")),tS("error-move.wav");let e=eY-1;e>=0?(eU(e),setTimeout(()=>{u({title:"Wrong Letter!",description:"Must start with '".concat(eF,"'. ").concat(e," ").concat(1===e?"retry":"retries"," left."),variant:"destructive"})},0),!tN.current||eV||e5||e6||tj.current||tO()):tP.current("Wrong starting letter. Expected '".concat(eF,"'.")),U(!1);return}if(R.has(t)){eR("'".concat(e,"' has already been used. Please try a different one.")),tS("error-move.wav");let t=eY-1;t>=0?(eU(t),setTimeout(()=>{u({title:"Duplicate Place!",description:"'".concat(e,"' already used. ").concat(t," ").concat(1===t?"retry":"retries"," left."),variant:"destructive"})},0),!tN.current||eV||e5||e6||tj.current||tO()):tP.current("'".concat(e,"' has already been used. No retries left.")),U(!1);return}try{let r=await c(e,A);if(r.isValid){let r=tT(e);if(R.has(r)){eR("'".concat(e,"' (or a similar name) has already been used.")),tS("error-move.wav");let t=eY-1;t>=0?(eU(t),setTimeout(()=>{u({title:"Duplicate Place!",description:"'".concat(e,"' already used. ").concat(t," ").concat(1===t?"retry":"retries"," left."),variant:"destructive"})},0),!tN.current||eV||e5||e6||tj.current||tO()):tP.current("'".concat(e,"' (or a similar name) has already been used.")),U(!1);return}let a=[...A,e];P(a),D(e=>new Set(e).add(t).add(r)),F(""),tS("correct-move.wav");let s={score:eq.score+1,coins:eq.coins+5,iq:Math.min(100,eq.iq+2)};ez(s);let n=eH+1;eQ(n),tE(s,n)||setTimeout(()=>{u({title:"Great Move!",description:"'".concat(e,"' added. Opponent's turn..."),className:"bg-primary text-primary-foreground"})},0),N("loadingNextTurn"),e_("opponent");let l=tA(e);eG(l),eU(1),tL(a,l)}else{let t=r.reason||"'".concat(e,"' is not a valid input.");r.reason&&(r.reason.includes("not a recognized place")||r.reason.includes("not found"))&&(t="Only continents, countries, states, and famous cities are allowed. '".concat(e,"' is not recognized.")),eR(t),tS("error-move.wav");let a=eY-1;a>=0?(eU(a),setTimeout(()=>{u({title:"Invalid Location",description:"".concat(t," ").concat(a," ").concat(1===a?"retry":"retries"," left."),variant:"destructive"})},0),!tN.current||eV||e5||e6||tj.current||tO()):tP.current("".concat(t," No retries left."))}}catch(e){console.error("User submission error with local data:",e),eR("A game error occurred. Please try again."),tS("error-move.wav"),setTimeout(()=>u({title:"Error",description:"A game error occurred.",variant:"destructive",icon:(0,a.jsx)($.A,{className:"h-5 w-5"})}),0),!tN.current||eV||e5||e6||tj.current||tO()}finally{U(!1)}},[M,Y,e5,e6,tf,tT,eF,eY,R,A,eq,eH,tE,u,tA,tO,tC,tL,eV,tS]),tM=async e=>{e.preventDefault(),tD()},t_=(0,s.useRef)(!1);(0,s.useEffect)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){tx(!1);return}let t=new e;return t.continuous=!1,t.interimResults=!0,t.lang="en-US",t.onstart=()=>{tm(!0),eR(null),setTimeout(()=>u({title:"Listening...",description:"Speak now!"}),0)},t.onresult=e=>{let t="";for(let r=e.resultIndex;r<e.results.length;++r)t+=e.results[r][0].transcript,e.results[r].isFinal?F(e.results[r][0].transcript.trim()):F(t)},t.onerror=e=>{console.error("Speech recognition error",e.error);let r="An unknown speech error occurred.",a=!1;"not-allowed"===e.error?r="Microphone access denied. Please allow access in your browser settings.":"no-speech"===e.error?(r="No speech detected. Please try again.",a=!0):"network"===e.error?r="Network error during speech recognition.":"audio-capture"===e.error&&(r="Microphone not available or not working."),setTimeout(()=>{u({title:"Speech Error",description:r,variant:"destructive",action:a?{label:"Retry",onClick:()=>{t_.current=!1,t.start()}}:void 0})},0),tm(!1),a&&(t_.current=!0,setTimeout(()=>{t_.current&&t.start()},1500))},t.onend=()=>{tm(!1),t_.current=!1,!M.trim()||"playerTurn"!==tb.current||Y||e5||e6||eV||tj.current||tD()},tu.current=t,()=>{var e;null===(e=tu.current)||void 0===e||e.stop()}},[u,M,Y,e5,e6,tD,eV]);let tF=async()=>{if("playerTurn"===tb.current&&!e5&&!e6&&!(te<=0)&&!H&&!Y&&!eV&&!tj.current){tS("click.wav"),Q(!0),eR(null),eD([]);try{let e=await o(A,3);eD(e),e.length>0?(tS("hint-popup.wav"),setTimeout(()=>u({title:"Hints Generated!",description:"Check out the suggestions."}),0)):(tS("error-move.wav"),setTimeout(()=>u({title:"No Hints Found",description:"Could not find suitable hints from local data."}),0)),tt(e=>e-1)}catch(e){console.error("Hint generation error from local data:",e),eR("Failed to generate hints."),tS("error-move.wav"),setTimeout(()=>u({title:"Hint Error",description:"Failed to generate hints.",variant:"destructive",icon:(0,a.jsx)($.A,{className:"h-5 w-5"})}),0)}finally{Q(!1)}}},tG=()=>{tS("click.wav"),tC(),tv(!1),e7(!1),N(e?"countdown":"nameInput"),k(0),eB(null),setTimeout(()=>u({title:"Game Restarted",description:"Starting a new game."}),0)},tq=()=>{tS("click.wav"),tC(),tv(!1),t(null),l(!1),m(e||""),N("nameInput"),eB(null),tR(),setTimeout(()=>u({title:"Exited Game",description:"Returning to name input screen."}),0)},tz=async()=>{if(eq.score<=0||W)return;tS("click.wav"),eP(!0);let e="I just scored ".concat(eq.score," points playing AtlasPlay! My IQ is ").concat(eq.iq,". Can you beat my score? \uD83C\uDF0D\uD83C\uDFC6"),t=window.location.origin+"/play";try{navigator.share?(await navigator.share({title:"My AtlasPlay Score!",text:e,url:t}),setTimeout(()=>u({title:"Shared!",description:"Your score has been shared."}),0)):(ty(!0),navigator.clipboard?(await navigator.clipboard.writeText("".concat(e," Play here: ").concat(t)),setTimeout(()=>u({title:"Copied to Clipboard!",description:"Score message copied. Manual share links available."}),0)):setTimeout(()=>u({title:"Share Failed",description:"Could not automatically share or copy. Please use manual links.",variant:"destructive"}),0))}catch(e){console.error("Error sharing score:",e),ty(!0),e instanceof DOMException?"AbortError"===e.name?setTimeout(()=>u({title:"Share Cancelled",description:"You cancelled the share operation."}),0):"NotAllowedError"===e.name?setTimeout(()=>u({title:"Share Permission Denied",description:"Sharing was blocked. Try manual links or check browser permissions.",variant:"destructive"}),0):setTimeout(()=>u({title:"Share Error",description:"Share failed: ".concat(e.message,". Try manual links."),variant:"destructive"}),0):e instanceof Error?setTimeout(()=>u({title:"Share Error",description:"An unexpected error occurred: ".concat(e.message,". Try manual links."),variant:"destructive"}),0):setTimeout(()=>u({title:"Share Error",description:"An unknown error occurred. Try manual links.",variant:"destructive"}),0)}finally{eP(!1)}};if("nameInput"===p||!r)return(0,a.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-background to-secondary/30 p-4",children:(0,a.jsxs)(h,{className:"w-full max-w-md shadow-2xl",children:[(0,a.jsxs)(g,{className:"text-center space-y-4 pt-8",children:[(0,a.jsx)(G,{className:"justify-center mb-4"}),(0,a.jsx)(v,{className:"font-headline text-3xl",children:"Welcome to AtlasPlay!"}),(0,a.jsx)(w,{children:"Enter your name to start your adventure."})]}),(0,a.jsx)(y,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),tS("click.wav"),d.trim()?(t(d.trim()),l(!0)):setTimeout(()=>u({title:"Name Required",description:"Please enter a name to play.",variant:"destructive"}),0)},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_,{htmlFor:"playerNameInput",className:"text-base",children:"Player Name"}),(0,a.jsx)(f,{id:"playerNameInput",type:"text",placeholder:"Your Name",value:d,onChange:e=>m(e.target.value),required:!0,className:"text-lg p-3",disabled:Y})]}),(0,a.jsx)(x,{type:"submit",className:"w-full text-lg py-3",size:"lg",disabled:!d.trim()||Y,children:"Let's Play!"})]})})]})});if("countdown"===p)return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-background to-secondary/30 p-4",children:[(0,a.jsx)(G,{className:"mb-8"}),S<ej.length?(0,a.jsx)("p",{className:"font-headline text-8xl md:text-9xl text-primary animate-pulse",children:ej[S]}):(0,a.jsx)(et.A,{className:"h-12 w-12 animate-spin text-primary"})]});let tY="user"===eM?er.A:ea.A,tU="Loading...";tg?tU="Game Paused":"playerTurn"!==tb.current||eV?"opponentTurn"===tb.current||"loadingNextTurn"===tb.current?tU="Opponent is Thinking...":eV&&(tU="Game Over"):tU="Your Turn (Starts with '".concat(eF,"')");let tV=[{name:"Twitter",icon:(0,a.jsx)(es.A,{className:"h-5 w-5"}),url:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent("I just scored ".concat(eq.score," points playing AtlasPlay! My IQ is ").concat(eq.iq,". Play at ").concat(window.location.origin+"/play")))},{name:"Facebook",icon:(0,a.jsx)(en.A,{className:"h-5 w-5"}),url:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(window.location.origin+"/play"),"&quote=").concat(encodeURIComponent("I just scored ".concat(eq.score," points playing AtlasPlay!  My IQ is ").concat(eq.iq,".")))}];return(0,a.jsxs)("div",{className:"flex flex-col items-center min-h-screen p-4 md:p-8 bg-gradient-to-br from-background via-secondary/30 to-background text-foreground",children:[e5&&e2&&(0,a.jsx)(V,{isOpen:e5,onClose:()=>{tS("click.wav"),e4(!1),"loadingNextTurn"!==tb.current||"opponent"!==eM||!(A.length>0)||eV||e5||e6||tj.current||tL(A,eF)},recordType:e2.type,newValue:e2.value}),e6&&(0,a.jsx)(B,{isOpen:e6,onClose:()=>{tS("click.wav"),e8(!1)},wins:e0}),(0,a.jsxs)("header",{className:"w-full max-w-3xl mb-6 flex justify-between items-center",children:[(0,a.jsx)(G,{}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(J,{}),e&&(0,a.jsxs)(T,{variant:"secondary",className:"text-sm py-1 px-3 flex items-center gap-1.5",children:[(0,a.jsx)(el.A,{className:"h-4 w-4"})," ",e]}),(0,a.jsx)(x,{variant:"outline",size:"sm",onClick:()=>{tS("click.wav"),tC(),tv(!1),t(null),l(!1),m(e||""),N("nameInput"),eB(null),tR()},children:"Change Name"})]})]}),(0,a.jsxs)("div",{className:"w-full max-w-3xl mb-4 flex flex-col sm:flex-row gap-2 justify-end items-center text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L,{id:"sound-effects-toggle",checked:tn,onCheckedChange:e=>{tl(e),localStorage.setItem(eE,JSON.stringify(e)),tS("click.wav")},"aria-label":"Toggle sound effects",disabled:tg}),(0,a.jsxs)(_,{htmlFor:"sound-effects-toggle",className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(ei.A,{className:"h-4 w-4"})," Sound Effects"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L,{id:"background-music-toggle",checked:ti,onCheckedChange:e=>{tc(e),localStorage.setItem(eI,JSON.stringify(e)),e&&to.current&&("playerTurn"===p||"opponentTurn"===p||"loadingNextTurn"===p)&&!tg&&!eV?to.current.play().catch(e=>console.error("Error playing background music on toggle:",e)):!e&&to.current&&to.current.pause(),tS("click.wav")},"aria-label":"Toggle background music",disabled:tg}),(0,a.jsxs)(_,{htmlFor:"background-music-toggle",className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(ec.A,{className:"h-4 w-4"})," Music"]})]})]}),(0,a.jsxs)(h,{className:"w-full max-w-3xl shadow-xl mb-4",children:[(0,a.jsxs)(g,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-muted-foreground mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eo.A,{className:"h-4 w-4 text-yellow-500"})," Score: ",eq.score," (Best: ",eW,")"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 text-orange-500"})," Streak: ",eH," (Best: ",eX,")"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eu.A,{className:"h-4 w-4 text-green-500"})," Coins: ",eq.coins]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(q.A,{className:"h-4 w-4 text-blue-500"})," Wins: ",e0]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(ed.A,{className:"h-5 w-5 text-purple-500"}),(0,a.jsx)(O,{value:eq.iq,className:"w-full h-3","aria-label":"IQ level ".concat(eS(eq.iq),": ").concat(eq.iq," out of 100"),"aria-valuenow":eq.iq,"aria-valuemin":0,"aria-valuemax":100}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[eS(eq.iq)," (",eq.iq," IQ) (Best: ",e$,")"]})]}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-1",children:(0,a.jsxs)(v,{className:"font-headline text-xl md:text-2xl text-center flex items-center justify-center gap-2","aria-live":"polite",children:[(0,a.jsx)(tY,{className:"h-6 w-6 text-primary"})," ",tU]})}),"gameOver"!==tb.current&&A.length>0&&(0,a.jsxs)(w,{className:"text-center",children:["Last played: ",(0,a.jsx)("strong",{className:"text-accent",children:A[A.length-1]})]})]}),(0,a.jsxs)(y,{children:[(0,a.jsxs)(j,{className:"h-40 md:h-48 w-full border rounded-md p-3 mb-4 bg-muted/30",children:[0!==A.length||"gameOver"===tb.current||tg?tg?(0,a.jsx)("p",{className:"text-muted-foreground text-center font-semibold",children:"Game Paused. Press Resume to continue."}):(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:A.map((e,t)=>(0,a.jsxs)(T,{variant:t===A.length-1?"default":"secondary",className:"text-sm py-0.5 px-2 shadow-sm",children:[e,t<A.length-1&&(0,a.jsx)("span",{className:"text-xs opacity-60 ml-1",children:"->"})]},t))}):(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"The chain is empty. Make the first move!"}),eV&&(0,a.jsxs)(C,{variant:eV.includes("You win!")?"default":"destructive",className:"mt-4",children:[(0,a.jsx)(em.A,{className:"h-4 w-4"}),(0,a.jsx)(E,{children:eV.includes("You win!")?"Congratulations!":"Game Over!"}),(0,a.jsx)(I,{children:eV})]})]}),"playerTurn"===tb.current&&!eV&&(0,a.jsxs)("form",{onSubmit:tM,className:"space-y-3",children:[td&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 animate-pulse text-primary",children:[(0,a.jsx)(ep.A,{className:"h-5 w-5 animate-pulse"}),(0,a.jsx)("span",{children:"Listening... Please speak now"})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,a.jsx)(f,{type:"text",value:M,onChange:e=>F(e.target.value),placeholder:"Enter location starting with '".concat(eF,"'"),className:"flex-grow py-2.5 px-3.5 text-base md:text-sm","aria-label":"Location input",disabled:Y||e5||e6||td||tg}),(0,a.jsx)(x,{type:"button",variant:td?"destructive":"outline",size:"icon",className:"h-[42px] w-[42px] md:h-10 md:w-10 shrink-0","aria-label":td?"Stop voice recording":"Start voice recording for location input",onClick:()=>{if(tS("click.wav"),tj.current){setTimeout(()=>u({title:"Game Paused",description:"Resume game to use microphone."}),0);return}if(!tN.current&&tp&&setTimeout(()=>u({title:"Voice Input Note",description:"Voice input might be affected by network status.",variant:"default"}),0),!tp){setTimeout(()=>{u({title:"Mic Not Supported",description:"Speech recognition is not supported by your browser.",variant:"destructive"})},0);return}if(tu.current){if(td)tu.current.stop();else if("playerTurn"===tb.current&&!Y&&!e5&&!e6&&!eV&&!tj.current)try{tu.current.start()}catch(e){console.error("Error starting speech recognition:",e),setTimeout(()=>u({title:"Mic Error",description:"Could not start voice recording.",variant:"destructive"}),0)}}},disabled:!tp||Y||e5||e6||tg,children:td?(0,a.jsx)(ex.A,{className:"h-4 w-4 md:h-5 md:w-5"}):(0,a.jsx)(ep.A,{className:"h-4 w-4 md:h-5 md:w-5"})})]}),(0,a.jsxs)(x,{type:"submit",className:"w-full text-md py-2.5",disabled:Y||!M.trim()||e5||e6||td||tg,children:[Y?(0,a.jsx)(et.A,{className:"mr-2 h-5 w-5 animate-spin"}):null,"Submit Location"]})]}),("opponentTurn"===tb.current||"loadingNextTurn"===tb.current)&&!eV&&!e5&&!e6&&!tg&&(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(et.A,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Opponent is thinking..."})]}),eO&&"gameOver"!==tb.current&&!e5&&!e6&&!tg&&(0,a.jsxs)(C,{variant:"destructive",className:"mt-4","aria-live":"assertive",children:[(0,a.jsx)(em.A,{className:"h-4 w-4"}),(0,a.jsx)(E,{children:"Oops!"}),(0,a.jsxs)(I,{children:[eO," ",!(eY>=0)||"playerTurn"!==tb.current||eO.includes("retry")||eO.includes("No retries left")||eO.toLowerCase().includes("only continents, countries")?"":"".concat(eY," ").concat(1===eY?"retry":"retries"," left.")]})]}),"playerTurn"===tb.current&&!eV&&!e5&&!e6&&(0,a.jsxs)("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(x,{variant:"outline",onClick:tF,disabled:H||Y||td||te<=0||tg,className:"bg-accent/20 hover:bg-accent/30 text-accent-foreground border-accent/50 shrink-0","aria-label":"Get a hint, ".concat(te," uses left"),children:[H?(0,a.jsx)(et.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(ef.A,{className:"mr-2 h-4 w-4"}),"Hint (",te," left)"]}),te<=0&&(0,a.jsxs)(x,{variant:"outline",disabled:!0,className:"opacity-70 text-xs px-2 shrink-0",children:[(0,a.jsx)(eh.A,{className:"mr-1.5 h-4 w-4"})," Watch Ad for Hints"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>{tS("click.wav"),tv(e=>{let t=!e;return t?(tC(),setTimeout(()=>u({title:"Game Paused",icon:(0,a.jsx)(Z.A,{className:"h-5 w-5"})}),0)):("playerTurn"!==tb.current||eV||e5||e6||tO(),setTimeout(()=>u({title:"Game Resumed",icon:(0,a.jsx)(ee.A,{className:"h-5 w-5"})}),0)),t})},"aria-label":tg?"Resume Game":"Pause Game",className:"text-primary",children:tg?(0,a.jsx)(ee.A,{className:"h-5 w-5"}):(0,a.jsx)(Z.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center text-lg font-medium text-primary p-2 border border-primary/30 rounded-md shadow-sm bg-primary/5 min-w-[80px]",children:[(0,a.jsx)(eg.A,{className:"h-5 w-5 mr-2 text-primary/80"}),(0,a.jsxs)("span",{children:[String(tr).padStart(2,"0"),"s"]})]})]})]}),te<=0&&"playerTurn"===tb.current&&!eV&&!e5&&!e6&&!tg&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"You have used all your hints for this game."}),eL.length>0&&"playerTurn"===tb.current&&!eV&&!e5&&!e6&&!tg&&(0,a.jsxs)("div",{className:"mt-3 p-3 border rounded-md bg-accent/10",children:[(0,a.jsxs)("h3",{className:"font-semibold text-accent-foreground mb-1.5 flex items-center text-sm",children:[(0,a.jsx)(ev.A,{className:"h-4 w-4 mr-1.5 text-accent"}),"Suggestions:"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-0.5",children:eL.map((e,t)=>(0,a.jsx)("li",{className:"text-xs text-accent-foreground/80",children:e},t))})]})]}),("playerTurn"===tb.current||"opponentTurn"===tb.current||"loadingNextTurn"===tb.current||"gameOver"===tb.current)&&!e5&&!e6&&(0,a.jsx)(b,{className:"flex flex-col gap-3 pt-4 ".concat("gameOver"===tb.current?"sm:flex-row justify-center":"sm:flex-row justify-end"),children:"gameOver"===tb.current?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x,{onClick:tG,className:"text-lg py-3 px-6 w-full sm:w-auto",children:[(0,a.jsx)(ee.A,{className:"mr-2 h-5 w-5"})," Play Again?"]}),eq.score>0&&(0,a.jsxs)(x,{onClick:tz,variant:"outline",className:"text-lg py-3 px-6 w-full sm:w-auto",disabled:W,"aria-label":"Share your score",children:[W?(0,a.jsx)(et.A,{className:"mr-2 h-5 w-5 animate-spin"}):(0,a.jsx)(ew.A,{className:"mr-2 h-5 w-5"}),"Share Score"]}),(0,a.jsxs)(x,{onClick:tq,variant:"ghost",className:"text-lg py-3 px-6 w-full sm:w-auto",children:[(0,a.jsx)(ey.A,{className:"mr-2 h-5 w-5"})," Exit to Menu"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x,{onClick:tG,variant:"outline",size:"sm",disabled:tg,children:[(0,a.jsx)(eb.A,{className:"mr-2 h-4 w-4"})," Restart Game"]}),(0,a.jsxs)(x,{onClick:tq,variant:"destructive",size:"sm",disabled:tg,children:[(0,a.jsx)(ey.A,{className:"mr-2 h-4 w-4"})," Exit Game"]})]})}),"gameOver"===tb.current&&!e5&&!e6&&(0,a.jsxs)("div",{className:"p-6 pt-0 text-center",children:[tw&&eq.score>0&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap justify-center items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Or share via:"}),tV.map(e=>(0,a.jsx)(x,{variant:"outline",size:"icon",asChild:!0,children:(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer","aria-label":"Share on ".concat(e.name),children:e.icon})},e.name))]}),e9&&(0,a.jsxs)(x,{variant:"outline",disabled:!0,className:"text-lg py-3 px-6 opacity-70 mt-4",children:[(0,a.jsx)(eh.A,{className:"mr-2 h-5 w-5"})," Watch Ad for Time (Feature Coming Soon)"]})]})]}),(0,a.jsx)("footer",{className:"mt-6 text-center text-xs text-muted-foreground",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," AtlasPlay. All rights reserved."]})})]})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2596),s=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[61,944,441,684,358],()=>t(3499)),_N_E=e.O()}]);